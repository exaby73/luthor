{"version":3,"sources":["../src/index.ts","../src/utils.ts"],"sourcesContent":["import type { VFileWithOutput } from 'unified'\nimport type { VFile } from 'vfile'\nimport {\n\tBundledShikiTheme,\n\tloadShikiTheme,\n\tExpressiveCode,\n\tExpressiveCodeConfig,\n\tExpressiveCodeTheme,\n\tExpressiveCodeBlockOptions,\n\tExpressiveCodeBlock,\n\tExpressiveCodeThemeInput,\n} from 'expressive-code'\nimport type { Root, Parents, Element } from 'expressive-code/hast'\nimport { visit } from 'expressive-code/hast'\nimport { CodeBlockInfo, createInlineAssetElement, getCodeBlockInfo } from './utils'\n\ntype AnyVFile = VFile | VFileWithOutput<null>\n\nexport * from 'expressive-code'\n\nexport type RehypeExpressiveCodeOptions = Omit<ExpressiveCodeConfig, 'themes'> & {\n\t/**\n\t * The color themes that should be available for your code blocks.\n\t *\n\t * CSS variables will be generated for all themes, allowing to select the theme to display\n\t * using CSS. If you specify one dark and one light theme, a `prefers-color-scheme` media query\n\t * will also be generated by default. You can customize this to match your site's needs\n\t * through the `useDarkModeMediaQuery` and `themeCssSelector` options.\n\t *\n\t * The following item types are supported in this array:\n\t * - any theme name bundled with Shiki (e.g. `dracula`)\n\t * - any theme object compatible with VS Code or Shiki (e.g. imported from an NPM theme package)\n\t * - any ExpressiveCodeTheme instance (e.g. using `ExpressiveCodeTheme.fromJSONString(...)`\n\t *   to load a custom JSON/JSONC theme file yourself)\n\t *\n\t * Defaults to `['github-dark', 'github-light']`, two themes bundled with Shiki.\n\t */\n\tthemes?: ThemeObjectOrShikiThemeName[] | undefined\n\t/**\n\t * The number of spaces that should be used to render tabs. Defaults to 2.\n\t *\n\t * Any tabs found in code blocks in your markdown/MDX documents will be replaced\n\t * with the specified number of spaces. This ensures that the code blocks are\n\t * rendered consistently across browsers and platforms.\n\t *\n\t * If you want to preserve tabs in your code blocks, set this option to 0.\n\t */\n\ttabWidth?: number | undefined\n\t/**\n\t * This optional function provides support for multi-language sites by allowing you\n\t * to customize the locale used for a given code block.\n\t *\n\t * If the function returns `undefined`, the default locale provided in the\n\t * Expressive Code configuration is used.\n\t */\n\tgetBlockLocale?: (({ input, file }: { input: ExpressiveCodeBlockOptions; file: AnyVFile }) => string | undefined | Promise<string | undefined>) | undefined\n\t/**\n\t * This optional function allows you to customize how `ExpressiveCodeBlock`\n\t * instances are created from code blocks found in the Markdown document.\n\t *\n\t * The function is called with an object containing the following properties:\n\t * - `input`: Block data for the `ExpressiveCodeBlock` constructor.\n\t * - `file`: A `VFile` instance representing the Markdown document.\n\t *\n\t * The function is expected to return an `ExpressiveCodeBlock` instance\n\t * or a promise resolving to one.\n\t */\n\tcustomCreateBlock?: (({ input, file }: { input: ExpressiveCodeBlockOptions; file: AnyVFile }) => ExpressiveCodeBlock | Promise<ExpressiveCodeBlock>) | undefined\n\t/**\n\t * This advanced option allows you to influence the rendering process by creating\n\t * your own `ExpressiveCode` instance or processing the base styles and JS modules\n\t * added to every page.\n\t *\n\t * The return value will be cached and used for all code blocks on the site.\n\t */\n\tcustomCreateRenderer?: ((options: RehypeExpressiveCodeOptions) => Promise<RehypeExpressiveCodeRenderer> | RehypeExpressiveCodeRenderer) | undefined\n}\n\nexport type ThemeObjectOrShikiThemeName = BundledShikiTheme | ExpressiveCodeTheme | ExpressiveCodeThemeInput\n\nexport type RehypeExpressiveCodeDocument = {\n\t/**\n\t * The full path to the source file containing the code block.\n\t */\n\tsourceFilePath?: string | undefined\n}\n\nexport type RehypeExpressiveCodeRenderer = {\n\tec: ExpressiveCode\n\tbaseStyles: string\n\tthemeStyles: string\n\tjsModules: string[]\n}\n\n/**\n * Creates an `ExpressiveCode` instance using the given `options`,\n * including support to load themes bundled with Shiki by name.\n *\n * Returns the created `ExpressiveCode` instance together with the base styles and JS modules\n * that should be added to every page.\n */\nexport async function createRenderer(options: RehypeExpressiveCodeOptions = {}): Promise<RehypeExpressiveCodeRenderer> {\n\t// Transfer deprecated `theme` option to `themes` without triggering the deprecation warning\n\tconst deprecatedOptions: Omit<RehypeExpressiveCodeOptions, 'theme'> & { theme?: ThemeObjectOrShikiThemeName | ThemeObjectOrShikiThemeName[] | undefined } = options\n\tif (deprecatedOptions.theme && !options.themes) {\n\t\toptions.themes = Array.isArray(deprecatedOptions.theme) ? deprecatedOptions.theme : [deprecatedOptions.theme]\n\t\tdelete deprecatedOptions.theme\n\t}\n\tconst { themes, ...ecOptions } = options\n\n\tconst loadedThemes =\n\t\tthemes &&\n\t\t(await Promise.all(\n\t\t\t(Array.isArray(themes) ? themes : [themes]).map(async (theme) => {\n\t\t\t\tconst mustLoadTheme = theme !== undefined && !(theme instanceof ExpressiveCodeTheme)\n\t\t\t\tconst optLoadedTheme = mustLoadTheme ? new ExpressiveCodeTheme(typeof theme === 'string' ? await loadShikiTheme(theme) : theme) : theme\n\t\t\t\treturn optLoadedTheme\n\t\t\t})\n\t\t))\n\tconst ec = new ExpressiveCode({\n\t\tthemes: loadedThemes,\n\t\t...ecOptions,\n\t})\n\tconst baseStyles = await ec.getBaseStyles()\n\tconst themeStyles = await ec.getThemeStyles()\n\tconst jsModules = await ec.getJsModules()\n\n\treturn {\n\t\tec,\n\t\tbaseStyles,\n\t\tthemeStyles,\n\t\tjsModules,\n\t}\n}\n\nfunction rehypeExpressiveCode(options: RehypeExpressiveCodeOptions = {}) {\n\tconst { tabWidth = 2, getBlockLocale, customCreateRenderer, customCreateBlock } = options\n\n\tlet asyncRenderer: Promise<RehypeExpressiveCodeRenderer> | RehypeExpressiveCodeRenderer | undefined\n\n\tconst renderBlockToHast = async ({\n\t\tcodeBlock,\n\t\trenderer,\n\t\taddedStyles,\n\t\taddedJsModules,\n\t\tuseMdxJsx,\n\t}: {\n\t\tcodeBlock: ExpressiveCodeBlock\n\t\trenderer: RehypeExpressiveCodeRenderer\n\t\taddedStyles: Set<string>\n\t\taddedJsModules: Set<string>\n\t\tuseMdxJsx: boolean\n\t}): Promise<Element> => {\n\t\tconst { ec, baseStyles, themeStyles, jsModules } = renderer\n\n\t\t// Try to render the current code block\n\t\tconst { renderedGroupAst, styles } = await ec.render(codeBlock)\n\n\t\t// Collect any style and script elements that we need to add to the output\n\t\tconst extraElements: Element['children'] = []\n\t\tconst stylesToPrepend: string[] = []\n\n\t\t// Add any styles that we haven't added yet\n\t\t// - Base styles\n\t\tif (baseStyles && !addedStyles.has(baseStyles)) {\n\t\t\taddedStyles.add(baseStyles)\n\t\t\tstylesToPrepend.push(baseStyles)\n\t\t}\n\t\t// - Theme styles\n\t\tif (themeStyles && !addedStyles.has(themeStyles)) {\n\t\t\taddedStyles.add(themeStyles)\n\t\t\tstylesToPrepend.push(themeStyles)\n\t\t}\n\t\t// - Group-level styles\n\t\tfor (const style of styles) {\n\t\t\tif (addedStyles.has(style)) continue\n\t\t\taddedStyles.add(style)\n\t\t\tstylesToPrepend.push(style)\n\t\t}\n\t\t// Combine all styles we collected (if any) into a single style element\n\t\tif (stylesToPrepend.length) {\n\t\t\textraElements.push(\n\t\t\t\tcreateInlineAssetElement({\n\t\t\t\t\ttagName: 'style',\n\t\t\t\t\tinnerHTML: stylesToPrepend.join(''),\n\t\t\t\t\tuseMdxJsx,\n\t\t\t\t})\n\t\t\t)\n\t\t}\n\n\t\t// Create script elements for all JS modules we haven't added yet\n\t\tjsModules.forEach((moduleCode) => {\n\t\t\tif (addedJsModules.has(moduleCode)) return\n\t\t\taddedJsModules.add(moduleCode)\n\t\t\textraElements.push(\n\t\t\t\tcreateInlineAssetElement({\n\t\t\t\t\ttagName: 'script',\n\t\t\t\t\tproperties: { type: 'module' },\n\t\t\t\t\tinnerHTML: moduleCode,\n\t\t\t\t\tuseMdxJsx,\n\t\t\t\t})\n\t\t\t)\n\t\t})\n\n\t\t// Prepend any extra elements to the children of the renderedGroupAst wrapper,\n\t\t// which keeps them inside the wrapper and reduces the chance of CSS issues\n\t\t// caused by selectors like `* + *` on the parent level\n\t\trenderedGroupAst.children.unshift(...extraElements)\n\n\t\treturn renderedGroupAst\n\t}\n\n\tconst transformer = async (tree: Root, file: AnyVFile) => {\n\t\tconst nodesToProcess: [Parents, CodeBlockInfo][] = []\n\n\t\tvisit(tree, 'element', (element, index, parent) => {\n\t\t\tif (index === null || !parent) return\n\t\t\tconst codeBlockInfo = getCodeBlockInfo(element)\n\t\t\tif (codeBlockInfo) nodesToProcess.push([parent, codeBlockInfo])\n\t\t})\n\n\t\tif (nodesToProcess.length === 0) return\n\n\t\t// We found at least one code node, so we need to ensure our renderer is available\n\t\t// and wait for its initialization if necessary\n\t\tif (asyncRenderer === undefined) {\n\t\t\tasyncRenderer = (customCreateRenderer ?? createRenderer)(options)\n\t\t}\n\t\tconst renderer = await asyncRenderer\n\n\t\t// Determine how to render style and script elements based on the environment and file type\n\t\t// (Astro allows using regular HTML elements in MDX, while Next.js requires JSX)\n\t\tconst isAstro = file.data?.astro !== undefined\n\t\tconst isMdx = file.path?.endsWith('.mdx') ?? false\n\t\tconst useMdxJsx = !isAstro && isMdx\n\n\t\t// Render all code blocks on the page while keeping track of the assets we already added\n\t\tconst addedStyles = new Set<string>()\n\t\tconst addedJsModules = new Set<string>()\n\n\t\tfor (let groupIndex = 0; groupIndex < nodesToProcess.length; groupIndex++) {\n\t\t\tconst [parent, code] = nodesToProcess[groupIndex]\n\n\t\t\t// Normalize the code coming from the Markdown/MDX document\n\t\t\tlet normalizedCode = code.text\n\t\t\tif (tabWidth > 0) normalizedCode = normalizedCode.replace(/\\t/g, ' '.repeat(tabWidth))\n\n\t\t\t// Build the ExpressiveCodeBlockOptions object that we will pass either\n\t\t\t// to the ExpressiveCodeBlock constructor or the customCreateBlock function\n\t\t\tconst input: ExpressiveCodeBlockOptions = {\n\t\t\t\tcode: normalizedCode,\n\t\t\t\tlanguage: code.lang || '',\n\t\t\t\tmeta: code.meta || '',\n\t\t\t\tparentDocument: {\n\t\t\t\t\tsourceFilePath: file.path,\n\t\t\t\t\tdocumentRoot: tree,\n\t\t\t\t\tpositionInDocument: {\n\t\t\t\t\t\tgroupIndex,\n\t\t\t\t\t\ttotalGroups: nodesToProcess.length,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}\n\n\t\t\t// Allow the user to customize the locale for this code block\n\t\t\tif (getBlockLocale) {\n\t\t\t\tinput.locale = await getBlockLocale({ input: input, file })\n\t\t\t}\n\n\t\t\t// Allow the user to customize the ExpressiveCodeBlock instance\n\t\t\tconst codeBlock = customCreateBlock ? await customCreateBlock({ input, file }) : new ExpressiveCodeBlock(input)\n\n\t\t\t// Render the code block and use it to replace the found `<pre>` element\n\t\t\tconst renderedBlock = await renderBlockToHast({ codeBlock, renderer, addedStyles, addedJsModules, useMdxJsx })\n\t\t\tparent.children.splice(parent.children.indexOf(code.pre), 1, renderedBlock)\n\t\t}\n\t}\n\n\treturn transformer\n}\n\nexport default rehypeExpressiveCode\n","import type { Element } from 'expressive-code/hast'\nimport type { MdxJsxFlowElementHast, MdxJsxAttribute } from 'mdast-util-mdx-jsx'\nimport { getClassNames } from 'expressive-code/hast'\n\nexport type CodeBlockInfo = NonNullable<ReturnType<typeof getCodeBlockInfo>>\n\nexport function getCodeBlockInfo(pre: Element) {\n\tif (pre.tagName !== 'pre' || pre.children.length !== 1) return\n\tconst code = pre.children[0]\n\tif (code.type !== 'element' || code.tagName !== 'code') return\n\tconst text = code.children[0]\n\tif (text.type !== 'text') return\n\tconst langClass = getClassNames(code).find((c) => c.startsWith('language-')) ?? ''\n\tconst lang = langClass.replace('language-', '')\n\tconst meta = (code.data?.meta ?? code.properties?.metastring ?? '') as string\n\treturn {\n\t\tpre,\n\t\tcode,\n\t\tlang,\n\t\ttext: text.value,\n\t\tmeta,\n\t}\n}\n\nexport function createInlineAssetElement({\n\ttagName,\n\tproperties = {},\n\tinnerHTML,\n\tuseMdxJsx,\n}: {\n\ttagName: string\n\tproperties?: Record<string, string | null | undefined> | undefined\n\tinnerHTML: string\n\tuseMdxJsx: boolean\n}): MdxJsxFlowElementHast | Element {\n\tif (useMdxJsx) return createMdxJsxElementWithInnerHTML(tagName, properties, innerHTML)\n\treturn {\n\t\ttype: 'element',\n\t\ttagName,\n\t\tproperties,\n\t\tchildren: [{ type: 'text', value: innerHTML }],\n\t}\n}\n\nfunction createMdxJsxElementWithInnerHTML(tagName: string, properties: Record<string, MdxJsxAttribute['value']>, innerHTML: string): MdxJsxFlowElementHast {\n\tconst attrs: MdxJsxAttribute[] = Object.entries(properties).map(([name, value]: [string, MdxJsxAttribute['value']]) => ({\n\t\ttype: 'mdxJsxAttribute',\n\t\tname,\n\t\tvalue,\n\t}))\n\treturn {\n\t\ttype: 'mdxJsxFlowElement',\n\t\tname: tagName,\n\t\tattributes: [\n\t\t\t...attrs,\n\t\t\t{\n\t\t\t\ttype: 'mdxJsxAttribute',\n\t\t\t\tname: 'dangerouslySetInnerHTML',\n\t\t\t\tvalue: {\n\t\t\t\t\ttype: 'mdxJsxAttributeValueExpression',\n\t\t\t\t\tvalue: `{__html:${JSON.stringify(innerHTML)}}`,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\testree: {\n\t\t\t\t\t\t\ttype: 'Program',\n\t\t\t\t\t\t\tbody: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttype: 'ExpressionStatement',\n\t\t\t\t\t\t\t\t\texpression: {\n\t\t\t\t\t\t\t\t\t\ttype: 'ObjectExpression',\n\t\t\t\t\t\t\t\t\t\tproperties: [\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'Property',\n\t\t\t\t\t\t\t\t\t\t\t\tmethod: false,\n\t\t\t\t\t\t\t\t\t\t\t\tshorthand: false,\n\t\t\t\t\t\t\t\t\t\t\t\tcomputed: false,\n\t\t\t\t\t\t\t\t\t\t\t\tkey: {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'Identifier',\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: '__html',\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'Literal',\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: innerHTML,\n\t\t\t\t\t\t\t\t\t\t\t\t\traw: JSON.stringify(innerHTML),\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tkind: 'init',\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tsourceType: 'module',\n\t\t\t\t\t\t\tcomments: [],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\tdata: {\n\t\t\t_mdxExplicitJsx: true,\n\t\t},\n\t\tchildren: [],\n\t}\n}\n"],"mappings":"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","names":[]}